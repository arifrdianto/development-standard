# Kata Platform Development Standard - General TypeScript Guidelines

## Overview

This is a living document outlining the general guidelines for writing TypeScript code according to the Kata Platform Development Standard.

## Tooling

### Use `--strict` mode

Make sure to enable strict mode in your tsconfig! Anything less will cause a huge mess in our codebase further down the road.

```json
{
    "compilerOptions": {
        "strict": true
    }
}
```

### TSLint + Prettier

We use TSLint to lint our codebase according to the Development Standard. We also use Prettier to automatically format our codebase after saving and/or before committing.

Please read the documentation to [our shared TSLint config](https://github.com/kata-ai/tslint-config-kata). To use it, install TSLint + Prettier + tslint-config-kata.

```bash
$ npm install --save-dev tslint tslint-config-kata prettier tslint-plugin-prettier tslint-config-prettier
```

`tslint.json`

```json
{
    "rulesDirectory": ["tslint-plugin-prettier"],
    "extends": ["tslint-config-kata", "tslint-config-prettier"],
    "linterOptions": {
        "exclude": ["node_modules/**"]
    },
    "rules": {
        "prettier": true
    }
}
```

`.prettierrc`

```json
{
    "printWidth": 120,
    "singleQuote": false,
    "trailingComma": "es5",
    "useTabs": false,
    "tabWidth": 4
}
```

## Styleguide

Our styleguide is mostly derived from the [Airbnb JavaScript styleguide](https://github.com/airbnb/javascript), with changes made to accomodate TypeScript projects.

### Naming

#### Test files

All test files must be written either separately inside a `__tests__/` folder, or within the same folder with a `.test.{js,ts,tsx}` suffix.

#### Autogenerated files

All auto-generated files must be written either separately inside a `__generated__/` folder, or within the same folder with a `.generated.{js,ts,tsx}` suffix.

> Make sure to ignore these files in your TSLint/Prettier config.

### Indentation & Line length

#### Use a 4-space indentation

Using space indentation ensures that indentation will look the same on all IDEs.

#### Lines shouldn't exceed 120 characters

This is how long most modern screens could display monospace text inside any window without wrapping.

### Semicolons

Yes.

```ts
// Bad example
const maxThreshold = 25

// Good example
const maxThreshold = 25;
```

### Trailing comma

It is recommended to include a trailing comma in multiline array/object statements. This will lead to cleaner git diffs.

```js
// Bad example
const hero = {
    firstName: 'Ada',
    lastName: 'Lovelace',
    birthYear: 1815,
    superPower: 'computers'
};

// Good example
const hero = {
    firstName: 'Ada',
    lastName: 'Lovelace',
    birthYear: 1815,
    superPower: 'computers',
};
```

> Leaving the trailing comma on used to be a problem with legacy JavaScript, but ES6 no longer has that issue. Also, tools like Babel automatically removes the additional comma when compiling to older JavaScript.

### Types

#### Avoid `any`

The whole point of TypeScript is to be more specific than this. So when you can, try to replace `any` with a more specific type declaration!

#### Prefer `undefined` over `null`.

In fact, `null` should be avoided where possible. Don't use them in newer codebases.

> When dealing with legacy code that uses `null` (e.g. in Redux), these should be kept isolated using selectors.

#### Use `// @ts-ignore` comment to ignore type errors

If a type error cannot be fixed for some reason, put a `// @ts-ignore` comment above the line with an explanation.

```ts
// @ts-ignore: doThing() api is changed on version 3.0 but the typings haven't been updated yet
const thing = doThing(one, two);
```

> Note that these should be treated as TODO items, since they're type errors that should be fixed next time there's a chance.

#### Use PascalCase when declaring types.

```ts
// Bad example
type responseObject = {}

// Good example
type ResponseObject = {}
```

### Classes

#### Declare access modifiers for each class method

If declaring a class method, you should always specify whether the method is `public`, `private`, or `protected`.

```ts
class Person {
    constructor() {}

    // Bad example
    sayHello(greeting: string): void {}

    // Good example
    public sayHello(greeting: string): void {}
}
```

#### Always initialize class properties

Even when it's `undefined`, class properties should always be initialized

```ts
class Person {
    // Bad example
    element: HTMLElement;

    // Good example
    element: HTMLElement | null = null;

    // ...
}
```

### Legacy TypeScript syntax

These are legacy TypeScript syntaxes that must be avoided at all times. Don't use these. **Ever.**

#### Avoid namespaces

This is the legacy method for defining modules in TypeScript, and Babel doesn't support it. It can be easily replaced with ES Modules.

#### Avoid `export = ` and `import = require('')` syntax

These can also be easily replaced with ES Modules.
